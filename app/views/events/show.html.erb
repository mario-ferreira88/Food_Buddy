<div class="image-cover">
  <%= image_tag 'dinner-rectangle.png'%>
  <%= link_to events_path, class: "arrow-icon" do %>
    <i class="fa-solid fa-arrow-left ms-3 mt-3" style="color: #9AA6B5;"></i>
  <% end %>
</div>

<div class="d-flex justify-content-center">
  <div class="col-10 mt-4 mb-5">
    <div class="d-flex justify-content-between">
      <h2 class="text-left"><%= @event.name %></h2>
      <div class="d-flex justify-content-end pb-5 fa-xl">
        <i class="fa-solid fa-ellipsis dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown"
          aria-haspopup="true" aria-expanded="false" style="color: #1e2248;"></i>
            <div class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">
              <p><%= link_to "Edit time", edit_event_path(@event, progress: 30), class: 'dropdown-item mb-4' %></p>
              <p><%= link_to "Edit restaurant", edit_event_path(@event, progress: 80), class: 'dropdown-item mb-4' %></p>
              <p><%= link_to "Delete event", event_path(@event),
              data: {turbo_method: :delete, turbo_confirm: 'Are you sure?'}, class: 'dropdown-item mt-4' %></p>
            </div>
      </div>
    </div>
    <p class="mb-3">
      <i class="fa-solid fa-location-dot fa-sm" style="color: #1E2248;"></i>
      <%= @event.restaurant.name %>
    </p>
    <p>
      <i class="fa-solid fa-calendar fa-sm" style="color: #1E2248;"></i>
      <%= @event.date.strftime('%a %dth %B') %>
      <i class="fa-solid fa-clock fa-sm" style="color: #1E2248; margin-left: 5px;"></i>
      <%= @event.date.strftime('%H:%M') %>
    </p>

    <h3 class="mt-4">Location</h3>

    <div class="card-location">
      <%= image_tag 'tacos.png' %>
      <div class="card-location-infos">
        <div class="flex-container">
          <h2><%= @event.restaurant.name %></h2>
          <i class="fa-solid fa-chevron-right"></i>
        </div>
      </div>
    </div>

  <%# Display the categories that match both restaurant and the user profile %>
  <%# When group event, we need to display the categories that match all user %>
  <%# When solo event, we need to display the categories that match the user %>

    <% @matching_categories.each do |category| %>
      <p><%= category.name %></p>
    <% end %>

      <% if @event.is_a?(GroupEvent) %>
    <h3 class="mt-5 mb-4">Who's joining?</h3>
    <div class="event-details">
        <p>
          <i class="fa-solid fa-people-group" style="color: #1e2248;"></i>
          <%= link_to @event.group.name, group_path(@event.group) %>
        </p>
      <% end %>
    </div>
  </div>
</div>
